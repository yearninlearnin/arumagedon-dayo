Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_secretsmanager_secret.fugaku_db_secret01: Creating...
aws_ssm_parameter.fugaku_db_name_param: Creating...
aws_eip.fugaku_nat_eip01: Creating...
aws_cloudwatch_log_group.fugaku_log_group01: Creating...
aws_iam_role.fugaku_ec2_role01: Creating...
aws_vpc.fugaku_vpc01: Creating...
aws_sns_topic.fugaku_sns_topic01: Creating...
aws_iam_role.fugaku_ec2_role01: Creation complete after 0s [id=fugaku-ec2-role01]
aws_iam_role_policy_attachment.fugaku_ec2_ssm_attach: Creating...
aws_iam_role_policy_attachment.fugaku_ec2_cw_attach: Creating...
aws_iam_instance_profile.fugaku_instance_profile01: Creating...
aws_secretsmanager_secret.fugaku_db_secret01: Creation complete after 1s [id=arn:aws:secretsmanager:ap-northeast-1:477391720857:secret:fugaku/rds/mysql-70iO3l]
aws_iam_role_policy.fugaku_ec2_secrets_inline: Creating...
aws_cloudwatch_log_group.fugaku_log_group01: Creation complete after 1s [id=/aws/ec2/fugaku-rds-app]
aws_iam_role_policy_attachment.fugaku_ec2_cw_attach: Creation complete after 1s [id=fugaku-ec2-role01/arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy]
aws_ssm_parameter.fugaku_db_name_param: Creation complete after 1s [id=/lab/db/name]
aws_iam_role_policy_attachment.fugaku_ec2_ssm_attach: Creation complete after 1s [id=fugaku-ec2-role01/arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore]
aws_iam_role_policy.fugaku_ec2_secrets_inline: Creation complete after 0s [id=fugaku-ec2-role01:fugaku-secrets-policy]
aws_eip.fugaku_nat_eip01: Creation complete after 2s [id=eipalloc-0299864f612b8528f]
aws_sns_topic.fugaku_sns_topic01: Creation complete after 2s [id=arn:aws:sns:ap-northeast-1:477391720857:fugaku-db-incidents]
aws_sns_topic_subscription.fugaku_sns_sub01: Creating...
aws_cloudwatch_metric_alarm.fugaku_db_alarm01: Creating...
aws_sns_topic_subscription.fugaku_sns_sub01: Creation complete after 0s [id=arn:aws:sns:ap-northeast-1:477391720857:fugaku-db-incidents:0da9c67d-91ff-4a34-8632-0ae9a8447919]
aws_cloudwatch_metric_alarm.fugaku_db_alarm01: Creation complete after 1s [id=fugaku-db-connection-failure]
aws_iam_instance_profile.fugaku_instance_profile01: Creation complete after 7s [id=fugaku-instance-profile01]
aws_vpc.fugaku_vpc01: Still creating... [00m10s elapsed]
aws_vpc.fugaku_vpc01: Creation complete after 13s [id=vpc-0f2c8371d145c2764]
aws_subnet.fugaku_public_subnets[1]: Creating...
aws_route_table.fugaku_private_rt01: Creating...
aws_security_group.fugaku_ec2_sg01: Creating...
aws_route_table.fugaku_public_rt01: Creating...
aws_internet_gateway.fugaku_igw01: Creating...
aws_subnet.fugaku_private_subnets[0]: Creating...
aws_subnet.fugaku_private_subnets[1]: Creating...
aws_subnet.fugaku_public_subnets[0]: Creating...
aws_route_table.fugaku_private_rt01: Creation complete after 1s [id=rtb-0aaeda456f259665d]
aws_route_table.fugaku_public_rt01: Creation complete after 1s [id=rtb-06ff1e47962986b33]
aws_internet_gateway.fugaku_igw01: Creation complete after 2s [id=igw-0d774a21688e0daca]
aws_route.fugaku_public_default_route: Creating...
aws_subnet.fugaku_private_subnets[0]: Creation complete after 2s [id=subnet-045fac1dcec134277]
aws_subnet.fugaku_private_subnets[1]: Creation complete after 2s [id=subnet-0185d6858dad8d71d]
aws_route_table_association.fugaku_private_rta[0]: Creating...
aws_route_table_association.fugaku_private_rta[1]: Creating...
aws_db_subnet_group.fugaku_rds_subnet_group01: Creating...
aws_route_table_association.fugaku_private_rta[1]: Creation complete after 0s [id=rtbassoc-0bfa4aa2dc7f5a7a9]
aws_route_table_association.fugaku_private_rta[0]: Creation complete after 0s [id=rtbassoc-0f73d145541c6b9d9]
aws_route.fugaku_public_default_route: Creation complete after 1s [id=r-rtb-06ff1e47962986b331080289494]
aws_db_subnet_group.fugaku_rds_subnet_group01: Creation complete after 2s [id=fugaku-rds-subnet-group01]
aws_security_group.fugaku_ec2_sg01: Creation complete after 4s [id=sg-0ec80ff02cc9d0ea8]
aws_security_group.fugaku_rds_sg01: Creating...
aws_security_group.fugaku_rds_sg01: Creation complete after 4s [id=sg-04e63a91ef5409294]
aws_db_instance.fugaku_rds01: Creating...
aws_subnet.fugaku_public_subnets[1]: Still creating... [00m10s elapsed]
aws_subnet.fugaku_public_subnets[0]: Still creating... [00m10s elapsed]
aws_subnet.fugaku_public_subnets[1]: Creation complete after 12s [id=subnet-00fe7a534a24fd9b9]
aws_subnet.fugaku_public_subnets[0]: Creation complete after 16s [id=subnet-0191b5125fee77e2c]
aws_route_table_association.fugaku_public_rta[1]: Creating...
aws_route_table_association.fugaku_public_rta[0]: Creating...
aws_nat_gateway.fugaku_nat01: Creating...
aws_instance.fugaku_ec201: Creating...
aws_route_table_association.fugaku_public_rta[0]: Creation complete after 1s [id=rtbassoc-0b0a1ca01cc49ce7f]
aws_route_table_association.fugaku_public_rta[1]: Creation complete after 1s [id=rtbassoc-06a2b1ed70742e643]
aws_nat_gateway.fugaku_nat01: Still creating... [00m10s elapsed]
aws_instance.fugaku_ec201: Still creating... [00m10s elapsed]
aws_instance.fugaku_ec201: Creation complete after 14s [id=i-0a100f25f1f79a707]
aws_nat_gateway.fugaku_nat01: Still creating... [00m20s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [00m30s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [00m40s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [00m50s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [01m00s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [01m10s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [01m20s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [01m30s elapsed]
aws_nat_gateway.fugaku_nat01: Still creating... [01m40s elapsed]
aws_nat_gateway.fugaku_nat01: Creation complete after 1m46s [id=nat-0a95b0c3fb9ed07d2]
aws_route.fugaku_private_default_route: Creating...
aws_route.fugaku_private_default_rouz

#### error resolved



                                                                                                                          
 default 
❯ terraform apply
aws_sns_topic.fugaku_sns_topic01: Refreshing state... [id=arn:aws:sns:ap-northeast-1:477391720857:fugaku-db-incidents]
aws_ssm_parameter.fugaku_db_name_param: Refreshing state... [id=/lab/db/name]
aws_vpc.fugaku_vpc01: Refreshing state... [id=vpc-0f2c8371d145c2764]
aws_eip.fugaku_nat_eip01: Refreshing state... [id=eipalloc-0299864f612b8528f]
aws_iam_role.fugaku_ec2_role01: Refreshing state... [id=fugaku-ec2-role01]
aws_secretsmanager_secret.fugaku_db_secret01: Refreshing state... [id=arn:aws:secretsmanager:ap-northeast-1:477391720857:secret:fugaku/rds/mysql-70iO3l]
aws_cloudwatch_log_group.fugaku_log_group01: Refreshing state... [id=/aws/ec2/fugaku-rds-app]
aws_iam_role_policy_attachment.fugaku_ec2_cw_attach: Refreshing state... [id=fugaku-ec2-role01/arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy]
aws_iam_instance_profile.fugaku_instance_profile01: Refreshing state... [id=fugaku-instance-profile01]
aws_iam_role_policy_attachment.fugaku_ec2_ssm_attach: Refreshing state... [id=fugaku-ec2-role01/arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore]
aws_iam_role_policy.fugaku_ec2_secrets_inline: Refreshing state... [id=fugaku-ec2-role01:fugaku-secrets-policy]
aws_sns_topic_subscription.fugaku_sns_sub01: Refreshing state... [id=arn:aws:sns:ap-northeast-1:477391720857:fugaku-db-incidents:0da9c67d-91ff-4a34-8632-0ae9a8447919]
aws_cloudwatch_metric_alarm.fugaku_db_alarm01: Refreshing state... [id=fugaku-db-connection-failure]
aws_internet_gateway.fugaku_igw01: Refreshing state... [id=igw-0d774a21688e0daca]
aws_route_table.fugaku_public_rt01: Refreshing state... [id=rtb-06ff1e47962986b33]
aws_subnet.fugaku_private_subnets[1]: Refreshing state... [id=subnet-0185d6858dad8d71d]
aws_subnet.fugaku_private_subnets[0]: Refreshing state... [id=subnet-045fac1dcec134277]
aws_route_table.fugaku_private_rt01: Refreshing state... [id=rtb-0aaeda456f259665d]
aws_subnet.fugaku_public_subnets[1]: Refreshing state... [id=subnet-00fe7a534a24fd9b9]
aws_subnet.fugaku_public_subnets[0]: Refreshing state... [id=subnet-0191b5125fee77e2c]
aws_security_group.fugaku_ec2_sg01: Refreshing state... [id=sg-0ec80ff02cc9d0ea8]
aws_route.fugaku_public_default_route: Refreshing state... [id=r-rtb-06ff1e47962986b331080289494]
aws_security_group.fugaku_rds_sg01: Refreshing state... [id=sg-04e63a91ef5409294]
aws_db_subnet_group.fugaku_rds_subnet_group01: Refreshing state... [id=fugaku-rds-subnet-group01]
aws_route_table_association.fugaku_private_rta[1]: Refreshing state... [id=rtbassoc-0bfa4aa2dc7f5a7a9]
aws_route_table_association.fugaku_private_rta[0]: Refreshing state... [id=rtbassoc-0f73d145541c6b9d9]
aws_route_table_association.fugaku_public_rta[0]: Refreshing state... [id=rtbassoc-0b0a1ca01cc49ce7f]
aws_route_table_association.fugaku_public_rta[1]: Refreshing state... [id=rtbassoc-06a2b1ed70742e643]
aws_nat_gateway.fugaku_nat01: Refreshing state... [id=nat-0a95b0c3fb9ed07d2]
aws_instance.fugaku_ec201: Refreshing state... [id=i-0a100f25f1f79a707]
aws_route.fugaku_private_default_route: Refreshing state... [id=r-rtb-0aaeda456f259665d1080289494]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place

Terraform will perform the following actions:

  # aws_db_instance.fugaku_rds01 will be created
  + resource "aws_db_instance" "fugaku_rds01" {
      + address                               = (known after apply)
      + allocated_storage                     = 20
      + apply_immediately                     = false
      + arn                                   = (known after apply)
      + auto_minor_version_upgrade            = true
      + availability_zone                     = (known after apply)
      + backup_retention_period               = (known after apply)
      + backup_target                         = (known after apply)
      + backup_window                         = (known after apply)
      + ca_cert_identifier                    = (known after apply)
      + character_set_name                    = (known after apply)
      + copy_tags_to_snapshot                 = false
      + database_insights_mode                = (known after apply)
      + db_name                               = "fugakudb"
      + db_subnet_group_name                  = "fugaku-rds-subnet-group01"
      + dedicated_log_volume                  = false
      + delete_automated_backups              = true
      + domain_fqdn                           = (known after apply)
      + endpoint                              = (known after apply)
      + engine                                = "mysql"
      + engine_lifecycle_support              = (known after apply)
      + engine_version                        = (known after apply)
      + engine_version_actual                 = (known after apply)
      + hosted_zone_id                        = (known after apply)
      + id                                    = (known after apply)
      + identifier                            = "fugaku-rds01"
      + identifier_prefix                     = (known after apply)
      + instance_class                        = "db.t3.micro"
      + iops                                  = (known after apply)
      + kms_key_id                            = (known after apply)
      + latest_restorable_time                = (known after apply)
      + license_model                         = (known after apply)
      + listener_endpoint                     = (known after apply)
      + maintenance_window                    = (known after apply)
      + master_user_secret                    = (known after apply)
      + master_user_secret_kms_key_id         = (known after apply)
      + monitoring_interval                   = 0
      + monitoring_role_arn                   = (known after apply)
      + multi_az                              = (known after apply)
      + nchar_character_set_name              = (known after apply)
      + network_type                          = (known after apply)
      + option_group_name                     = (known after apply)
      + parameter_group_name                  = (known after apply)
      + password                              = (sensitive value)
      + password_wo                           = (write-only attribute)
      + performance_insights_enabled          = false
      + performance_insights_kms_key_id       = (known after apply)
      + performance_insights_retention_period = (known after apply)
      + port                                  = (known after apply)
      + publicly_accessible                   = false
      + region                                = "ap-northeast-1"
      + replica_mode                          = (known after apply)
      + replicas                              = (known after apply)
      + resource_id                           = (known after apply)
      + skip_final_snapshot                   = true
      + snapshot_identifier                   = (known after apply)
      + status                                = (known after apply)
      + storage_throughput                    = (known after apply)
      + storage_type                          = (known after apply)
      + tags                                  = {
          + "Name" = "fugaku-rds01"
        }
      + tags_all                              = {
          + "Name" = "fugaku-rds01"
        }
      + timezone                              = (known after apply)
      + upgrade_rollout_order                 = (known after apply)
      + username                              = "admin"
      + vpc_security_group_ids                = [
          + "sg-04e63a91ef5409294",
        ]
    }

  # aws_secretsmanager_secret_version.fugaku_db_secret_version01 will be created
  + resource "aws_secretsmanager_secret_version" "fugaku_db_secret_version01" {
      + arn                  = (known after apply)
      + has_secret_string_wo = (known after apply)
      + id                   = (known after apply)
      + region               = "ap-northeast-1"
      + secret_id            = "arn:aws:secretsmanager:ap-northeast-1:477391720857:secret:fugaku/rds/mysql-70iO3l"
      + secret_string        = (sensitive value)
      + secret_string_wo     = (write-only attribute)
      + version_id           = (known after apply)
      + version_stages       = (known after apply)
    }

  # aws_ssm_parameter.fugaku_db_endpoint_param will be created
  + resource "aws_ssm_parameter" "fugaku_db_endpoint_param" {
      + arn            = (known after apply)
      + data_type      = (known after apply)
      + has_value_wo   = (known after apply)
      + id             = (known after apply)
      + insecure_value = (known after apply)
      + key_id         = (known after apply)
      + name           = "/lab/db/endpoint"
      + region         = "ap-northeast-1"
      + tags           = {
          + "Name" = "fugaku-param-db-endpoint"
        }
      + tags_all       = {
          + "Name" = "fugaku-param-db-endpoint"
        }
      + tier           = (known after apply)
      + type           = "String"
      + value          = (sensitive value)
      + value_wo       = (write-only attribute)
      + version        = (known after apply)
    }

  # aws_ssm_parameter.fugaku_db_name_param will be updated in-place
  ~ resource "aws_ssm_parameter" "fugaku_db_name_param" {
        id              = "/lab/db/name"
        name            = "/lab/db/name"
        tags            = {
            "Name" = "fugaku-param-db-name"
        }
      ~ value           = (sensitive value)
      ~ version         = 1 -> (known after apply)
        # (11 unchanged attributes hidden)
    }

  # aws_ssm_parameter.fugaku_db_port_param will be created
  + resource "aws_ssm_parameter" "fugaku_db_port_param" {
      + arn            = (known after apply)
      + data_type      = (known after apply)
      + has_value_wo   = (known after apply)
      + id             = (known after apply)
      + insecure_value = (known after apply)
      + key_id         = (known after apply)
      + name           = "/lab/db/port"
      + region         = "ap-northeast-1"
      + tags           = {
          + "Name" = "fugaku-param-db-port"
        }
      + tags_all       = {
          + "Name" = "fugaku-param-db-port"
        }
      + tier           = (known after apply)
      + type           = "String"
      + value          = (sensitive value)
      + value_wo       = (write-only attribute)
      + version        = (known after apply)
    }

Plan: 4 to add, 1 to change, 0 to destroy.

Changes to Outputs:
  + fugaku_rds_endpoint       = (known after apply)

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_ssm_parameter.fugaku_db_name_param: Modifying... [id=/lab/db/name]
aws_db_instance.fugaku_rds01: Creating...
aws_ssm_parameter.fugaku_db_name_param: Modifications complete after 1s [id=/lab/db/name]
aws_db_instance.fugaku_rds01: Still creating... [00m10s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [00m20s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [00m30s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [00m40s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [00m50s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [01m00s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [01m10s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [01m20s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [01m30s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [01m40s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [01m50s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [02m00s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [02m10s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [02m20s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [02m30s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [02m40s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [02m50s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [03m00s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [03m10s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [03m20s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [03m30s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [03m40s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [03m50s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [04m00s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [04m10s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [04m20s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [04m30s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [04m40s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [04m50s elapsed]
aws_db_instance.fugaku_rds01: Still creating... [05m00s elapsed]
aws_db_instance.fugaku_rds01: Creation complete after 5m8s [id=db-RHY7SLOLQVG66U3Z3HY6WA7DJI]
aws_ssm_parameter.fugaku_db_endpoint_param: Creating...
aws_secretsmanager_secret_version.fugaku_db_secret_version01: Creating...
aws_ssm_parameter.fugaku_db_port_param: Creating...
aws_secretsmanager_secret_version.fugaku_db_secret_version01: Creation complete after 1s [id=arn:aws:secretsmanager:ap-northeast-1:477391720857:secret:fugaku/rds/mysql-70iO3l|terraform-20260209123320841300000001]
aws_ssm_parameter.fugaku_db_port_param: Creation complete after 1s [id=/lab/db/port]
aws_ssm_parameter.fugaku_db_endpoint_param: Creation complete after 1s [id=/lab/db/endpoint]

Apply complete! Resources: 4 added, 1 changed, 0 destroyed.

Outputs:

fugaku_ec2_instance_id = "i-0a100f25f1f79a707"
fugaku_log_group_name = "/aws/ec2/fugaku-rds-app"
fugaku_private_subnet_ids = [
  "subnet-045fac1dcec134277",
  "subnet-0185d6858dad8d71d",
]
fugaku_public_subnet_ids = [
  "subnet-0191b5125fee77e2c",
  "subnet-00fe7a534a24fd9b9",
]
fugaku_rds_endpoint = "fugaku-rds01.c9qc04u42qc2.ap-northeast-1.rds.amazonaws.com"
fugaku_sns_topic_arn = "arn:aws:sns:ap-northeast-1:477391720857:fugaku-db-incidents"
fugaku_vpc_id = "vpc-0f2c8371d145c2764"